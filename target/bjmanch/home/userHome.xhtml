<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:h="jakarta.faces.html"
                template="/WEB-INF/template/template.xhtml"
                xmlns:f="jakarta.faces.core"
                xmlns:c="jakarta.tags.core">

    <ui:define name="content">
        <div class="w3-col m7">
            <div class="w3-row-padding">
                <div class="w3-col m12">
                    <div class="w3-card w3-round w3-white">
                        <div class="w3-container w3-padding">
                            <h4 class="w3-margin-left">My Home</h4>
                            <br/>
                            <c:choose>
                                <c:when test="#{session.getAttribute('access')!=null}">
                                    <h5 class="w3-margin-left">My Forums</h5>
                                    <c:choose>
                                        <c:when test="#{homeMBean.userForumsDtos.size()>0}">
                                            <table class="w3-table w3-striped">
                                                <tr>
                                                    <th>Forum Title</th>
                                                    <th>Date Created</th>
                                                    <th>Details</th>
                                                </tr>
                                                <c:forEach items="#{homeMBean.userForumsDtos}" var="forum">
                                                    <tr>
                                                        <td><h:outputText value="#{forum.title}" /></td>
                                                        <td><h:outputText value="#{forum.createdOn}" />
                                                        </td>
                                                        <td>
                                                            <h:outputLink value="#{request.contextPath}/forum/ForumDetails.xhtml" styleClass="w3-margin-left">
                                                                <h:outputText value="View Details" />
                                                                <f:param name="forumId" value="#{forum.id}" />
                                                            </h:outputLink>
                                                        </td>
                                                    </tr>
                                                </c:forEach>
                                            </table>
                                        </c:when>
                                        <c:otherwise>
                                            <p class="w3-margin-left">No Forums Found</p>
                                        </c:otherwise>
                                    </c:choose>
                                    <br/>
                                    <h5 class="w3-margin-left">My Surveys</h5>
                                    <c:choose>
                                        <c:when test="#{homeMBean.userSurveysDtos.size()>0}">
                                            <table class="w3-table w3-striped">
                                                <tr>
                                                    <th>Survey Title</th>
                                                    <th>Date Created</th>
                                                    <th>Details</th>
                                                </tr>
                                                <c:forEach items="#{homeMBean.userSurveysDtos}" var="survey">
                                                    <tr>
                                                        <td><h:outputText value="#{survey.title}" /></td>
                                                        <td><h:outputText value="#{survey.createdOn}" />
                                                        </td>    
                                                        <td>
                                                            <h:outputLink value="#{request.contextPath}/survey/SurveyDetails.xhtml" styleClass="w3-margin-left">
                                                                <h:outputText value="View Details" />
                                                                <f:param name="surveyId" value="#{survey.id}" />
                                                            </h:outputLink>
                                                        </td>
                                                    </tr>
                                                </c:forEach>
                                            </table>
                                        </c:when>
                                        <c:otherwise>
                                            <p class="w3-margin-left">No Surveys Found</p>
                                        </c:otherwise>
                                    </c:choose>
                                    <br/>
                                    <h5 class="w3-margin-left">My Surveys From Forums</h5>
                                    <c:choose>
                                        <c:when test="#{homeMBean.userSurveysFromForumsDtos.size()>0}">
                                            <table class="w3-table w3-striped">
                                                <tr>
                                                    <th>Survey Title</th>
                                                    <th>Date Created</th>
                                                    <th>Details</th>
                                                </tr>
                                                <c:forEach items="#{homeMBean.userSurveysFromForumsDtos}" var="sff">
                                                    <tr>
                                                        <td><h:outputText value="#{sff.title}" /></td>
                                                        <td><h:outputText value="#{sff.createdOn}" />
                                                        </td> 
                                                        <td>
                                                            <h:outputLink value="#{request.contextPath}/surveyFromForum/SurveyFromForumDetails.xhtml" styleClass="w3-margin-left">
                                                                <h:outputText value="View Details" />
                                                                <f:param name="surveyId" value="#{sff.id}" />
                                                            </h:outputLink>
                                                        </td>
                                                    </tr>
                                                </c:forEach>
                                            </table>
                                        </c:when>
                                        <c:otherwise>
                                            <p class="w3-margin-left">No Surveys Found</p>
                                        </c:otherwise>
                                    </c:choose>
                                    <br/>
                                    <h5 class="w3-margin-left">My Blogs</h5>
                                    <c:choose>
                                        <c:when test="#{homeMBean.userBlogsDtos.size()>0}">
                                            <table class="w3-table w3-striped">
                                                <tr>
                                                    <th>Blog Title</th>
                                                    <th>Date Created</th>
                                                    <th>Details</th>
                                                </tr>
                                                <c:forEach items="#{homeMBean.userBlogsDtos}" var="blog">
                                                    <tr>
                                                        <td><h:outputText value="#{blog.title}" /></td>
                                                        <td><h:outputText value="#{blog.publishedOn}" />
                                                        </td>
                                                        <td>
                                                            <h:outputLink value="#{request.contextPath}/blog/BlogDetails.xhtml" styleClass="w3-margin-left">
                                                                <h:outputText value="View Details" />
                                                                <f:param name="blogId" value="#{blog.id}" />
                                                            </h:outputLink>
                                                        </td>
                                                    </tr>
                                                </c:forEach>
                                            </table>
                                        </c:when>
                                        <c:otherwise>
                                            <p class="w3-margin-left">No Blogs Found</p>
                                        </c:otherwise>
                                    </c:choose>


                                </c:when>
                                <c:otherwise>
                                    <p class="w3-margin-left">Please login first.</p>
                                </c:otherwise>
                            </c:choose>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>


